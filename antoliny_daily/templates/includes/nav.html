{% load static %}

<nav class="flex justify-between items-center py-2 bg-[#735726]">
  <a class="flex items-center justify-center gap-2 my-0 mx-auto" href="/">
    <span class="font-logo font-bold text-3xl text-white">ANTOLINY</span>
    <img class="h-[60px]" alt="Antoliny Daily Logo" src="{% static 'img/logo.png' %}">
  </a>
  <div class="mx-8">
      <ul>
        <li class="relative"
           x-data="{
              theme: localStorage.getItem('theme') || 'system',
              isSystemDark: localStorage.getItem('isSystemDark') === 'true',
              init() {
                  // Watch for system dark mode changes
                  const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
                  this.isSystemDark = mediaQuery.matches;
                  mediaQuery.addEventListener('change', (event) => {
                      this.isSystemDark = event.matches;
                      if (this.theme === 'system') {
                          this.updateTheme();
                      }
                  });

                  // Set the initial theme
                  this.updateTheme();
              },
              updateTheme() {
                  const isDark = this.theme === 'dark' || (this.theme === 'system' && this.isSystemDark);
                  document.documentElement.classList.toggle('dark', isDark);
              },
              setTheme(newTheme) {
                  this.theme = newTheme;
                  localStorage.setItem('theme', newTheme);
                  this.updateTheme();
              },
              currentIcon() {
                  if (this.theme === 'light') return 'light';
                  if (this.theme === 'dark') return 'dark';
                  return 'system'; // For 'system', decide based on system preference
              },
              systemIconColor() {
                  return this.isSystemDark ? 'dark' : 'light';
              }
          }"
           x-init="init"
        >
            <button
                @click="
                if (currentIcon() === 'light') {
                    setTheme('dark');
                } else if (currentIcon() === 'dark') {
                    setTheme('system');
                } else if (currentIcon() === 'system') {
                    setTheme('light');
                }
                "
                class="cursor-pointer rounded-full"
                >
                <!-- Dynamic Icons -->
                <template x-if="currentIcon() === 'light'">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
                    </svg>
                </template>
                <template x-if="currentIcon() === 'dark'">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-violet-300" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
                    </svg>
                </template>
                <template x-if="currentIcon() === 'system'">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" :class="systemIconColor() === 'light' ? 'fill-yellow-500' : 'fill-violet-300'"  viewBox="0 0 640 640">
                        <!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                        <path d="M512 160L512 416L128 416L128 160L512 160zM128 96C92.7 96 64 124.7 64 160L64 416C64 451.3 92.7 480 128 480L272 480L256 528L184 528C170.7 528 160 538.7 160 552C160 565.3 170.7 576 184 576L456 576C469.3 576 480 565.3 480 552C480 538.7 469.3 528 456 528L384 528L368 480L512 480C547.3 480 576 451.3 576 416L576 160C576 124.7 547.3 96 512 96L128 96z"/>
                    </svg>
                </template>
            </button>
        </li>
    </ul>
  </div>
</nav>
